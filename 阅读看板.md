---
cssclasses:
  - cards
  - cards-align-bottom
  - cards-cover
---

```dataviewjs
function formatUnixTimestamp(unixTimestamp) {
    let date = new Date(unixTimestamp * 1000);
    let year = date.getFullYear();
    let month = String(date.getMonth() + 1).padStart(2, '0');
    return `${year}-${month}`;
}

let pages = dv.pages('"微信读书"')

const groupData = pages.groupBy(b => formatUnixTimestamp(b.lastReadTimestamp));
let labels = groupData.map(gd => gd.key).values;
let values = groupData.map(gd => gd.rows.length).values;

const chartData = {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: '读书数量',
            data: values,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)'
            ],
            borderWidth: 1
        }]
    }
}

window.renderChart(chartData, this.container);
```

```dataview
table without id("![]("+ cover + ")") as 封面,
file.link as 书籍,
"**作者**：🧑 "+author as 作者,
"**类别**：🧷 "+category as 类别,
"**评分**：✨ " + rating + "<br><progress value='" + number(replace(rating,"%","")) + "' max='100'></progress>" as 评分,
"**进度**：⏳ " + readingStatus + " " + readProgress + "%<br><progress value='" + number(readProgress) + "' max='100'></progress>" as 进度,
"**笔记**：🖋️ "+sum([noteCount,reviewCount]) + " 条" as 笔记,
"**阅读时间**：⏱️ "+readingTime as 阅读时间,
"**最后阅读**：🗓️ "+dateformat(date(string(lastReadTimestamp),"X"),"yyyy-MM-dd") as 最后阅读

from "微信读书"
sort lastReadTimestamp desc
sort readingStatus desc
```



