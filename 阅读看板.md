---
cssclasses:
  - cards
  - cards-2-3
  - cards-align-bottom
  - cards-cover
---


```dataviewjs
const lowSaturationColors = ['rgba(54, 162, 235, 0.5)', 'rgba(255, 206, 86, 0.5)', 'rgba(75, 192, 192, 0.5)', 'rgba(153, 102, 255, 0.5)', 'rgba(255, 159, 64, 0.5)', 'rgba(199, 199, 199, 0.5)', 'rgba(255, 99, 71, 0.5)', 'rgba(255, 165, 0, 0.5)', 'rgba(50, 205, 50, 0.5)', 'rgba(106, 90, 205, 0.5)', 'rgba(255, 140, 0, 0.5)', 'rgba(135, 206, 250, 0.5)', 'rgba(233, 150, 122, 0.5)', 'rgba(210, 105, 30, 0.5)', 'rgba(0, 191, 255, 0.5)', 'rgba(152, 251, 152, 0.5)', 'rgba(176, 196, 222, 0.5)', 'rgba(255, 228, 196, 0.5)', 'rgba(240, 128, 128, 0.5)', 'rgba(189, 183, 107, 0.5)', 'rgba(128, 128, 128, 0.5)', 'rgba(255, 222, 173, 0.5)', 'rgba(0, 128, 128, 0.5)', 'rgba(95, 158, 160, 0.5)', 'rgba(219, 112, 147, 0.5)', 'rgba(123, 104, 238, 0.5)', 'rgba(144, 238, 144, 0.5)', 'rgba(72, 61, 139, 0.5)', 'rgba(255, 182, 193, 0.5)', 'rgba(64, 224, 208, 0.5)', 'rgba(100, 149, 237, 0.5)', 'rgba(219, 112, 147, 0.5)', 'rgba(245, 222, 179, 0.5)', 'rgba(255, 215, 0, 0.5)', 'rgba(205, 133, 63, 0.5)', 'rgba(221, 160, 221, 0.5)', 'rgba(218, 165, 32, 0.5)', 'rgba(72, 209, 204, 0.5)', 'rgba(176, 224, 230, 0.5)', 'rgba(127, 255, 212, 0.5)', 'rgba(216, 191, 216, 0.5)', 'rgba(255, 99, 71, 0.5)', 'rgba(205, 92, 92, 0.5)', 'rgba(128, 128, 0, 0.5)', 'rgba(139, 0, 139, 0.5)', 'rgba(184, 134, 11, 0.5)', 'rgba(0, 128, 128, 0.5)', 'rgba(233, 150, 122, 0.5)', ];
function secondsToTime(seconds) {
    const hours = Math.floor(seconds / 3600); // 1å°æ—¶ = 3600ç§’
    const minutes = Math.floor((seconds % 3600) / 60); // å–ä½™åè®¡ç®—åˆ†é’Ÿ
    const remainingSeconds = seconds % 60; // è®¡ç®—å‰©ä½™çš„ç§’æ•°

    let result = '';
    if (hours > 0) {
        result += `${hours}å°æ—¶`;
    }
    if (minutes > 0) {
        result += `${minutes}åˆ†é’Ÿ`;
    }
    if (remainingSeconds > 0 && hours === 0) { // åªæœ‰åœ¨æ²¡æœ‰å°æ—¶çš„æƒ…å†µä¸‹æ‰æ˜¾ç¤ºç§’æ•°
        result += `${remainingSeconds}ç§’`;
    }

    return result || '0ç§’'; // å¦‚æœè¾“å…¥0ç§’ï¼Œè¿”å› '0ç§’'
}

const container = this.container;
const parentDiv = document.createElement('div');
parentDiv.style.display = 'flex';
parentDiv.style.width = '100%';
parentDiv.style.maxWidth = '1000px';
parentDiv.style.gap = '20px';
container.appendChild(parentDiv);

// åˆ›å»ºç¬¬ä¸€ä¸ªå­å®¹å™¨
const chartDiv1 = document.createElement('div');
chartDiv1.style.flex = '4';
parentDiv.appendChild(chartDiv1);

// åˆ›å»ºç¬¬äºŒä¸ªå­å®¹å™¨
const chartDiv2 = document.createElement('div');
chartDiv2.style.flex = '8';
parentDiv.appendChild(chartDiv2);

let today = new Date();
let currentYear = today.getFullYear();
let currentMonth = today.getMonth() + 1;
let downPages = dv.pages('#è¯»å®Œ').where(b => {
	let lastReadDate = dv.date(b.lastReadDate);
	let res = lastReadDate && lastReadDate.year === currentYear && lastReadDate.month === currentMonth;
	return res;
});

let labels = downPages.title.values;
let values = downPages.readingTimestamp.values;
let thisMonthReadingTime = dv.func.sum(downPages.readingtimestamp);
dv.span(`æœ‰ ${downPages.length} æœ¬ä¹¦åœ¨ ${currentMonth} æœˆè¯»å®Œï¼Œè¯»è¿™äº›ä¹¦é˜…èŠ±äº† ${secondsToTime(thisMonthReadingTime)}(åŒ…æ‹¬æœ¬æœˆä¹‹å‰çš„æ—¶é—´)ï¼<br><br>`);

const thisMonthData = {
    type: 'pie',
    data: {
        labels: labels,
        datasets: [{
            label: 'è¯»ä¹¦æ•°é‡',
            data: values,
            borderWidth: 1,
            backgroundColor: lowSaturationColors,
            borderColor: [ 'rgba(255, 99, 132, 1)' ]
        }]
    },
    options: {
        animations: {
            tension: {
                duration: 10000,
                easing: 'easeInOutSine',
                from: 0.5,
                to: 0,
                loop: true
            }
        },
        plugins: {
		    title: {
		        display: true,
		        position: 'bottom',
		        text: 'åœ¨æœ¬æœˆè¯»å®Œçš„ä¹¦'
		    },
            tooltip: {
                enabled: true,
                mode: 'index',
                intersect: false,
                borderColor: 'white',
                borderWidth: 1,
                callbacks: {
                    title: function(tooltipItems) {
                        return `${tooltipItems[0].label}`;
                    },
                    label: function(tooltipItem) {
                        return `${secondsToTime(tooltipItem.raw)}`;
                    }
                }
            }
        }
    }
};


let allPages = dv.pages('#è¯»å®Œ')
const groupData = allPages.groupBy(b => { let date = dv.date(b.lastReadDate); return `${date.year}-${String(date.month).padStart(2, '0')}`});
let groupDataLabels = groupData.map(gd => gd.key).values;
let groupDataValues = groupData.map(gd => gd.rows.length).values;
let totalReadingTime = dv.func.sum(groupData.rows.readingtimestamp);
let totalHours = Math.floor(totalReadingTime / 3600);
let totalMinutes = Math.floor((totalReadingTime % 3600) / 60);
dv.span(`ä¸€å…±è¯»å®Œ ${groupData.rows.length} æœ¬ä¹¦ï¼ä¸€å…±é˜…è¯»äº† ${totalHours} å°æ—¶ ${totalMinutes} åˆ†é’Ÿï¼<br><br>`);

const allData = {
    type: 'bar',
    data: {
        labels: groupDataLabels,
        datasets: [{
            label: 'è¯»ä¹¦æ•°é‡',
            data: groupDataValues,
            backgroundColor: lowSaturationColors,
            borderColor: [
                'rgba(255, 99, 132, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        animations: {
            tension: {
                duration: 2000,
                easing: 'easeInOutSine',
                from: 0,
                to: 0.5,
                loop: false
            }
        },
        scales: { y: { beginAtZero: true, } },
        plugins: {
		    title: {
		        display: true,
		        position: 'bottom',
		        text: 'æŒ‰æœˆç»Ÿè®¡è¯»å®Œæ•°é‡'
		    }
        }
    }
}

window.renderChart(thisMonthData,chartDiv1);
window.renderChart(allData, chartDiv2);
```

# æœ¬æœˆè¯»å®Œ
```dataview
table without id("![]("+ cover + ")") as å°é¢,
"<span style='text-decoration: underline;white-space: nowrap;'>" + file.link + "</span>" as ä¹¦ç±,
"<span style='white-space: nowrap;'>ğŸ§‘ **ä½œè€…**ï¼š" + author + "</span>" as ä½œè€…,
"ğŸ§· **ç±»åˆ«**ï¼š" + category as ç±»åˆ«,
"ğŸ“– **å­—æ•°**ï¼š" + round(totalWords / 10000, 2) + " ä¸‡å­—" as å­—æ•°,
"âœ¨ **è¯„åˆ†**ï¼š" + rating + "<br><progress value='" + number(replace(rating,"%","")) + "' max='100'></progress>" as è¯„åˆ†,
"â³ **è¿›åº¦**ï¼š" + readingStatus + " " + readProgress + "% " + "<br><progress value='" + number(readProgress) + "' max='100'></progress>" as è¿›åº¦,
"ğŸ–‹ï¸ **ç¬”è®°**ï¼š" + sum([noteCount,reviewCount]) + " æ¡" as ç¬”è®°,
"â±ï¸ **é˜…è¯»æ—¶é—´**ï¼š" + readingTime as é˜…è¯»æ—¶é—´,
"ğŸ—“ï¸ **æœ€åé˜…è¯»**ï¼š" + dateformat(date(lastReadDate),"yyyy-MM-dd") as æœ€åé˜…è¯»

from "å¾®ä¿¡è¯»ä¹¦" and #è¯»å®Œ
where dateformat(date(lastReadDate),"yyyy-MM") = dateformat(date(now),"yyyy-MM")
sort lastReadDate desc
sort readingStatus desc
```

# åœ¨è¯»
```dataview
table without id("![]("+ cover + ")") as å°é¢,
"<span style='text-decoration: underline;white-space: nowrap;'>" + file.link + "</span>" as ä¹¦ç±,
"<span style='white-space: nowrap;'>ğŸ§‘ **ä½œè€…**ï¼š" + author + "</span>" as ä½œè€…,
"ğŸ§· **ç±»åˆ«**ï¼š" + category as ç±»åˆ«,
"ğŸ“– **å­—æ•°**ï¼š" + round(totalWords / 10000, 2) + " ä¸‡å­—" as å­—æ•°,
"âœ¨ **è¯„åˆ†**ï¼š" + rating + "<br><progress value='" + number(replace(rating,"%","")) + "' max='100'></progress>" as è¯„åˆ†,
"â³ **è¿›åº¦**ï¼š" + readingStatus + " " + readProgress + "% " + "<br><progress value='" + number(readProgress) + "' max='100'></progress>" as è¿›åº¦,
"ğŸ–‹ï¸ **ç¬”è®°**ï¼š" + sum([noteCount,reviewCount]) + " æ¡" as ç¬”è®°,
"â±ï¸ **é˜…è¯»æ—¶é—´**ï¼š" + readingTime as é˜…è¯»æ—¶é—´,
"ğŸ—“ï¸ **æœ€åé˜…è¯»**ï¼š" + dateformat(date(lastReadDate),"yyyy-MM-dd") as æœ€åé˜…è¯»

from "å¾®ä¿¡è¯»ä¹¦" and (#åœ¨è¯» or #æœªæ ‡è®°)
sort lastReadDate desc
```

# è¯»å®Œ
```dataview
table without id("![]("+ cover + ")") as å°é¢,
"<span style='text-decoration: underline;white-space: nowrap;'>" + file.link + "</span>" as ä¹¦ç±,
"<span style='white-space: nowrap;'>ğŸ§‘ **ä½œè€…**ï¼š" + author + "</span>" as ä½œè€…,
"ğŸ§· **ç±»åˆ«**ï¼š" + category as ç±»åˆ«,
"ğŸ“– **å­—æ•°**ï¼š" + round(totalWords / 10000, 2) + " ä¸‡å­—" as å­—æ•°,
"âœ¨ **è¯„åˆ†**ï¼š" + rating + "<br><progress value='" + number(replace(rating,"%","")) + "' max='100'></progress>" as è¯„åˆ†,
"â³ **è¿›åº¦**ï¼š" + readingStatus + " " + readProgress + "% " + "<br><progress value='" + number(readProgress) + "' max='100'></progress>" as è¿›åº¦,
"ğŸ–‹ï¸ **ç¬”è®°**ï¼š" + sum([noteCount,reviewCount]) + " æ¡" as ç¬”è®°,
"â±ï¸ **é˜…è¯»æ—¶é—´**ï¼š" + readingTime as é˜…è¯»æ—¶é—´,
"ğŸ—“ï¸ **æœ€åé˜…è¯»**ï¼š" + dateformat(date(lastReadDate),"yyyy-MM-dd") as æœ€åé˜…è¯»


from "å¾®ä¿¡è¯»ä¹¦" and #è¯»å®Œ
sort lastReadDate desc
```

