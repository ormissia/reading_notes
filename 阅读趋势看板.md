---
cssclasses:
  - cards
  - cards-align-bottom
  - cards-cover
---

```dataviewjs
function formatUnixTimestamp(unixTimestamp) {
    let date = new Date(unixTimestamp * 1000);
    let year = date.getFullYear();
    let month = String(date.getMonth() + 1).padStart(2, '0');
    return `${year}-${month}`;
}

let pages = dv.pages('"微信读书"')

const groupData = pages.groupBy(b => formatUnixTimestamp(b.lastReadTimestamp));
let labels = groupData.map(gd => gd.key).values;
let values = groupData.map(gd => gd.rows.length).values;

dv.span(`阅读总数: ${groupData.rows.length}`);

const chartData = {
    type: 'line',
    data: {
        labels: labels,
        datasets: [{
            label: '读书数量',
            data: values,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)'
            ],
            borderWidth: 2
        }]
    }
}

window.renderChart(chartData, this.container);
```

