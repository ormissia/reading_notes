---
doc_type: weread-highlights-reviews
bookId: "622000"
author: 黄健宏
cover: https://cdn.weread.qq.com/weread/cover/54/YueWen_622000/t7_YueWen_622000.jpg
reviewCount: 0
noteCount: 11
readingStatus: 在读
progress: 5%
totalReadDay: 3
readingTime: 0小时27分钟
readingDate: 2024-01-19
isbn: 9787111464747
lastReadDate: 2024-02-18

---

# Redis设计与实现


#读书笔记 #计算机 #编程设计

# 元数据
> [!abstract] Redis设计与实现
> - ![ Redis设计与实现|200](https://cdn.weread.qq.com/weread/cover/54/YueWen_622000/t7_YueWen_622000.jpg)
> - 书名： Redis设计与实现
> - 作者： 黄健宏
> - 简介： 《Redis设计与实现》对Redis的大多数单机功能以及所有多机功能的实现原理进行了介绍，展示了这些功能的核心数据结构以及关键的算法思想。通过阅读本书，读者可以快速、有效地了解Redis的内部构造以及运作机制，这些知识可以帮助读者更好、更高效地使用Redis。本书主要分为四大部分。第一部分“数据结构与对象”介绍了Redis中的各种对象及其数据结构，并说明这些数据结构如何影响对象的功能和性能。第二部分“单机数据库的实现”对Redis实现单机数据库的方法进行了介绍，包括数据库、RDB持久化、AOF持久化、事件等。第三部分“多机数据库的实现”对Redis的Sentinel、复制（replication）、集群（cluster）三个多机功能进行了介绍。第四部分“独立功能的实现”对Redis中各个相对独立的功能模块进行了介绍，涉及发布与订阅、事务、Lua脚本、排序、二进制位数组、慢查询日志、监视器等。
> - 出版时间 2015-01-01 00:00:00
> - ISBN： 9787111464747
> - 分类： 计算机-编程设计
> - 出版社： 机械工业出版社
> - PC地址：https://weread.qq.com/web/reader/d35323e0597db0d35bd957b

# 高亮划线


### 1.2 章节编排

> 📌 Redis数据库里面的每个键值对（key-value pair）都是由对象（object）组成  
> ⏱ 2024-02-15 15:31:50 ^622000-7-535-582

#### 2.2 SDS与C字符串的区别

> 📌 与C字符串不同，SDS的空间分配策略完全杜绝了发生缓冲区溢出的可能性：当SDS API需要对SDS进行修改时，API会先检查SDS的空间是否满足修改所需的要求，如果不满足的话，API会自动将SDS的空间扩展至执行修改所需的大小，然后才执行实际的修改操作，所以使用SDS既不需要手动修改SDS的空间大小，也不会出现前面所说的缓冲区溢出问题。  
> ⏱ 2024-02-15 17:52:37 ^622000-14-3666-3835

> 📌 通过未使用空间，SDS实现了空间预分配和惰性空间释放两种优化策略。  
> ⏱ 2024-02-15 17:55:54 ^622000-14-6243-6276

> 📌 空间预分配用于优化SDS的字符串增长操作：当SDS的API对一个SDS进行修改，并且需要对SDS进行空间扩展的时候，程序不仅会为SDS分配修改所必须要的空间，还会为SDS分配额外的未使用空间。  
> ⏱ 2024-02-15 17:56:04 ^622000-14-6367-6463

> 📌 通过这种预分配策略，SDS将连续增长N次字符串所需的内存重分配次数从必定N次降低为最多N次。  
> ⏱ 2024-02-16 09:03:56 ^622000-14-8215-8261

> 📌 惰性空间释放用于优化SDS的字符串缩短操作：当SDS的API需要缩短SDS保存的字符串时，程序并不立即使用内存重分配来回收缩短后多出来的字节，而是使用free属性将这些字节的数量记录起来，并等待将来使用。  
> ⏱ 2024-02-16 09:04:26 ^622000-14-8353-8455

> 📌 注意执行sdstrim之后的SDS并没有释放多出来的8字节空间，而是将这8字节空间作为未使用空间保留在了SDS里面，如果将来要对SDS进行增长操作的话，这些未使用空间就可能会派上用场。  
> ⏱ 2024-02-18 09:59:43 ^622000-14-9229-9321

> 📌 C字符串中的字符必须符合某种编码（比如ASCII），并且除了字符串的末尾之外，字符串里面不能包含空字符，否则最先被程序读入的空字符将被误认为是字符串结尾  
> ⏱ 2024-02-18 10:06:25 ^622000-14-10022-10098

> 📌 为了确保Redis可以适用于各种不同的使用场景，SDS的API都是二进制安全的（binary-safe），所有SDS API都会以处理二进制的方式来处理SDS存放在buf数组里的数据，程序不会对其中的数据做任何限制、过滤、或者假设，数据在写入时是什么样的，它被读取时就是什么样。  
> ⏱ 2024-02-18 10:08:29 ^622000-14-10599-10738

> 📌 通过使用二进制安全的SDS，而不是C字符串，使得Redis不仅可以保存文本数据，还可以保存任意格式的二进制数据。  
> ⏱ 2024-02-18 10:09:40 ^622000-14-11206-11262

### 第3章 链表

> 📌 当一个列表键包含了数量比较多的元素，又或者列表中包含的元素都是比较长的字符串时，Redis就会使用链表作为列表键的底层实现。  
> ⏱ 2024-02-18 10:28:03 ^622000-18-628-690



# 读书笔记




# 本书评论

